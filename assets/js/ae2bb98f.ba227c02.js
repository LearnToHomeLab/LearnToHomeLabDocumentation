"use strict";(globalThis.webpackChunkLearn_To_Homelab=globalThis.webpackChunkLearn_To_Homelab||[]).push([[7580],{146:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>t,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"HomeLab-Series/EP19_wazuhdiscordalerts","title":"How to Push Wazuh Alerts to Your Discord Server","description":"In this episode, we will cover how to push Wazuh alerts to your Discord server! This integration is extremely useful because most of us already use Discord. Why monitor a Wazuh dashboard when you can monitor your network directly through Discord?","source":"@site/docs/HomeLab-Series/EP19_wazuhdiscordalerts.mdx","sourceDirName":"HomeLab-Series","slug":"/HomeLab-Series/EP19_wazuhdiscordalerts","permalink":"/LearnToHomeLabDocumentation/docs/HomeLab-Series/EP19_wazuhdiscordalerts","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":22,"frontMatter":{"sidebar_position":22},"sidebar":"tutorialSidebar","previous":{"title":"NextCloud on TrueNas","permalink":"/LearnToHomeLabDocumentation/docs/HomeLab-Series/EP18_trunasnextcloud"},"next":{"title":"How to Setup a Proxmox Cluster","permalink":"/LearnToHomeLabDocumentation/docs/HomeLab-Series/EP20_ProxmoxClustering"}}');var i=n(4848),s=n(8453),a=(n(3573),n(6519),n(7286));const t={sidebar_position:22},l="How to Push Wazuh Alerts to Your Discord Server",d={},c=[{value:"Example of Discord Alerts",id:"example-of-discord-alerts",level:2},{value:"Create a Discord Webhook",id:"create-a-discord-webhook",level:2},{value:"Configure Wazuh Dashboard Integration",id:"configure-wazuh-dashboard-integration",level:2},{value:"SSH into your Wazuh Dashboard Machine",id:"ssh-into-your-wazuh-dashboard-machine",level:2},{value:"Verify Discord Alerts",id:"verify-discord-alerts",level:2},{value:"Conclusion",id:"conclusion",level:2},{value:"Follow Us on Social Media",id:"follow-us-on-social-media",level:2}];function h(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"how-to-push-wazuh-alerts-to-your-discord-server",children:"How to Push Wazuh Alerts to Your Discord Server"})}),"\n",(0,i.jsx)(r.p,{children:"In this episode, we will cover how to push Wazuh alerts to your Discord server! This integration is extremely useful because most of us already use Discord. Why monitor a Wazuh dashboard when you can monitor your network directly through Discord?"}),"\n",(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,i.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/NcXIl3VsHHY?si=BahQXNm_w4iKsuR7",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),"\n",(0,i.jsx)(r.h2,{id:"example-of-discord-alerts",children:"Example of Discord Alerts"}),"\n",(0,i.jsx)(r.p,{children:"Here is an example of what we\u2019ll create in this episode:"}),"\n",(0,i.jsx)(a.A,{folder:"images/EP19_wazuhdiscordalerts",name:"Still 2025-02-03 110900_1.1.1.png",alt:"Example Discord alert screenshot"}),"\n",(0,i.jsx)(r.h2,{id:"create-a-discord-webhook",children:"Create a Discord Webhook"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsx)(r.li,{children:"Open Discord."}),"\n",(0,i.jsx)(r.li,{children:"Go to the server you want to use for Wazuh alerts."}),"\n",(0,i.jsx)(r.li,{children:"Create a new text channel."}),"\n"]}),"\n",(0,i.jsx)(a.A,{folder:"images/EP19_wazuhdiscordalerts",name:"Still 2025-02-03 110900_1.3.1.png",alt:"Creating Discord channel"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsx)(r.li,{children:"Right-click your server."}),"\n",(0,i.jsx)(r.li,{children:"Open server settings."}),"\n",(0,i.jsx)(r.li,{children:"Choose \u201cIntegrations.\u201d"}),"\n"]}),"\n",(0,i.jsx)(a.A,{folder:"images/EP19_wazuhdiscordalerts",name:"Still 2025-02-03 110900_1.3.2.png",alt:"Opening Discord integrations page"}),"\n",(0,i.jsx)(r.p,{children:"Click \u201cCreate a Webhook.\u201d"}),"\n",(0,i.jsx)(a.A,{folder:"images/EP19_wazuhdiscordalerts",name:"Still 2025-02-03 110900_1.3.3.png",alt:"Creating webhook"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsx)(r.li,{children:"Click \u201cNew Webhook.\u201d"}),"\n",(0,i.jsx)(r.li,{children:"Name it something like \u201cWazuhAlerts.\u201d"}),"\n",(0,i.jsx)(r.li,{children:"Choose the channel created earlier."}),"\n",(0,i.jsx)(r.li,{children:"Copy the webhook URL and save it; we\u2019ll use it soon."}),"\n"]}),"\n",(0,i.jsx)(a.A,{folder:"images/EP19_wazuhdiscordalerts",name:"Still 2025-02-03 110900_1.3.4.png",alt:"Webhook setup in Discord"}),"\n",(0,i.jsx)(r.h2,{id:"configure-wazuh-dashboard-integration",children:"Configure Wazuh Dashboard Integration"}),"\n",(0,i.jsx)(r.p,{children:"Login to your Wazuh dashboard and navigate to:"}),"\n",(0,i.jsx)(r.p,{children:"(Server Management / Settings)"}),"\n",(0,i.jsx)(a.A,{folder:"images/EP19_wazuhdiscordalerts",name:"Still 2025-02-03 110900_1.3.5.png",alt:"Wazuh settings page"}),"\n",(0,i.jsx)(r.p,{children:"Click \u201cEdit Configuration\u201d in the top right corner."}),"\n",(0,i.jsx)(a.A,{folder:"images/EP19_wazuhdiscordalerts",name:"Still 2025-02-03 110900_1.3.6.png",alt:"Editing Wazuh configuration"}),"\n",(0,i.jsxs)(r.p,{children:["Paste the code below ",(0,i.jsx)(r.strong,{children:"after"})," the ",(0,i.jsx)(r.code,{children:"<global></global>"})," section:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:" <integration>\r\n     <name>custom-discord</name>\r\n     <hook_url>https://discord.com/api/webhooks/XXXXXXXXXXX</hook_url>\r\n     <alert_format>json</alert_format>\r\n </integration>\n"})}),"\n",(0,i.jsxs)(r.p,{children:["Then paste your Discords Webhook in the ",(0,i.jsx)("hook_url",{children:" "})," tags."]}),"\n",(0,i.jsx)(a.A,{folder:"images/EP19_wazuhdiscordalerts",name:"Still 2025-02-03 110900_1.3.7.png",alt:"Wazuh integration config"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsx)(r.li,{children:"Click Save."}),"\n",(0,i.jsx)(r.li,{children:"Restart the Wazuh Manager."}),"\n"]}),"\n",(0,i.jsx)(a.A,{folder:"images/EP19_wazuhdiscordalerts",name:"Still 2025-02-03 110900_1.3.8.png",alt:"Restarting Wazuh"}),"\n",(0,i.jsx)(r.h2,{id:"ssh-into-your-wazuh-dashboard-machine",children:"SSH into your Wazuh Dashboard Machine"}),"\n",(0,i.jsx)(r.p,{children:"Next we need to SSH into your Wazuh Dashboard Machine/VM (etc.) to configure the following settings."}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"ssh username@ip_address\n"})}),"\n",(0,i.jsx)(a.A,{folder:"images/EP19_wazuhdiscordalerts",name:"Still 2025-02-03 110900_1.3.9.png",alt:"SSH into Wazuh machine"}),"\n",(0,i.jsx)(r.p,{children:"After logging in, run:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"sudo su\n"})}),"\n",(0,i.jsx)(r.p,{children:"Then move to the integrations directory:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"cd /var/ossec/integrations\n"})}),"\n",(0,i.jsx)(r.p,{children:"List existing files:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"ls -l\n"})}),"\n",(0,i.jsx)(r.p,{children:"Download the custom Discord integrations:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"wget https://raw.githubusercontent.com/maikroservice/wazuh-integrations/main/discord/custom-discord\r\nwget https://raw.githubusercontent.com/maikroservice/wazuh-integrations/main/discord/custom-discord.py\n"})}),"\n",(0,i.jsx)(a.A,{folder:"images/EP19_wazuhdiscordalerts",name:"Still 2025-02-03 110900_1.3.10.png",alt:"Downloading integration files"}),"\n",(0,i.jsx)(r.p,{children:"To verify downloads:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"ls -l\n"})}),"\n",(0,i.jsx)(r.p,{children:"If files appear white, they lack execution permissions. Apply the correct ones:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"sudo chmod 750 /var/ossec/integrations/custom-*\r\nsudo chown root:wazuh /var/ossec/integrations/custom-*\n"})}),"\n",(0,i.jsx)(r.p,{children:"Check again:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"ls -l\n"})}),"\n",(0,i.jsx)(a.A,{folder:"images/EP19_wazuhdiscordalerts",name:"Still 2025-02-03 114021_1.3.11.png",alt:"Fixed file permissions"}),"\n",(0,i.jsx)(r.p,{children:"Install pip dependencies (ignore the \u201crunning as root\u201d warning):"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"# Debian / Ubuntu\r\nsudo apt-get install python3-pip\r\npip3 install requests\n"})}),"\n",(0,i.jsx)(a.A,{folder:"images/EP19_wazuhdiscordalerts",name:"Still 2025-02-03 110900_1.4.1.png",alt:"Installing pip for Wazuh script"}),"\n",(0,i.jsx)(r.p,{children:"Restart Wazuh controls:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"/var/ossec/bin/wazuh-control restart\n"})}),"\n",(0,i.jsx)(a.A,{folder:"images/EP19_wazuhdiscordalerts",name:"Still 2025-02-03 110900_1.3.12.png",alt:"Restarting Wazuh controls"}),"\n",(0,i.jsx)(a.A,{folder:"images/EP19_wazuhdiscordalerts",name:"Still 2025-02-03 110900_1.3.11.png",alt:"Integration restart verification"}),"\n",(0,i.jsx)(r.h2,{id:"verify-discord-alerts",children:"Verify Discord Alerts"}),"\n",(0,i.jsx)(r.p,{children:"Go to your Discord channel and verify that Wazuh restarted successfully with a confirmation alert."}),"\n",(0,i.jsx)(a.A,{folder:"images/EP19_wazuhdiscordalerts",name:"Still 2025-02-03 110900_1.4.3.png",alt:"Discord confirmation alert"}),"\n",(0,i.jsx)(r.p,{children:"Test the alert by attempting to SSH into one of your Wazuh-monitored machines with incorrect credentials. You should see a Discord notification within seconds."}),"\n",(0,i.jsx)(a.A,{folder:"images/EP19_wazuhdiscordalerts",name:"Still 2025-02-03 110900_1.5.1.png",alt:"Discord failed login alert"}),"\n",(0,i.jsx)(r.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsx)(r.p,{children:"That is it! I hope you guys enjoyed, if you would like to learn more please see the links down below."}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.a,{href:"https://support.discord.com/hc/en-us/articles/228383668-Intro-to-Webhooks",children:"How to setup Discord Webhooks"})}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.a,{href:"https://documentation.wazuh.com/current/user-manual/manager/integration-with-external-apis.html",children:"Wazuh external integration configurations"})}),"\n",(0,i.jsx)(r.h2,{id:"follow-us-on-social-media",children:"Follow Us on Social Media"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.a,{href:"https://www.youtube.com/@learntohomelab",children:"YouTube"})}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.a,{href:"https://discord.gg/6MsHSJWZpH",children:"Discord"})}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.a,{href:"https://www.patreon.com/c/learntohomelab",children:"Patreon"})}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.a,{href:"https://www.reddit.com/r/learntohomelab/",children:"Reddit"})}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.a,{href:"https://rumble.com/c/c-7585051",children:"Rumble"})})]})}function u(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);