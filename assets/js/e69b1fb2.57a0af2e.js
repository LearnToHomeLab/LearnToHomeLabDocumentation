"use strict";(globalThis.webpackChunkLearn_To_Homelab=globalThis.webpackChunkLearn_To_Homelab||[]).push([[5418],{5243:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"Software-Tutorials/EP2_affineorkspaces","title":"How to Install Affine Workspace Notes App in Your Homelab \u2014 Step-by-Step Tutorial","description":"Affine Hardware Requirements","source":"@site/docs/Software-Tutorials/EP2_affineorkspaces.mdx","sourceDirName":"Software-Tutorials","slug":"/Software-Tutorials/EP2_affineorkspaces","permalink":"/docs/Software-Tutorials/EP2_affineorkspaces","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Software Tutorials","permalink":"/docs/category/software-tutorials"},"next":{"title":"Install Kasm Remote Desktops","permalink":"/docs/Software-Tutorials/EP3_kasm"}}');var i=r(4848),s=r(8453);r(3573),r(6519),r(7286);const t={sidebar_position:2},a="How to Install Affine Workspace Notes App in Your Homelab \u2014 Step-by-Step Tutorial",l={},d=[{value:"Affine Hardware Requirements",id:"affine-hardware-requirements",level:2},{value:"Create LXC on Proxmox",id:"create-lxc-on-proxmox",level:2},{value:"Install Docker and Docker Compose",id:"install-docker-and-docker-compose",level:2},{value:"Installing Affine",id:"installing-affine",level:2},{value:"Editing the .env file",id:"editing-the-env-file",level:2},{value:"Start Affine",id:"start-affine",level:2},{value:"Adding Affine to Nginx Proxy Manager",id:"adding-affine-to-nginx-proxy-manager",level:2},{value:"Logging in to Affine",id:"logging-in-to-affine",level:2},{value:"About &quot;Accept Affine Cloud&quot; Message",id:"about-accept-affine-cloud-message",level:2},{value:"Upgrading Affine",id:"upgrading-affine",level:2},{value:"Follow Us on Social Media",id:"follow-us-on-social-media",level:2}];function c(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"how-to-install-affine-workspace-notes-app-in-your-homelab--step-by-step-tutorial",children:"How to Install Affine Workspace Notes App in Your Homelab \u2014 Step-by-Step Tutorial"})}),"\n",(0,i.jsx)(n.h2,{id:"affine-hardware-requirements",children:"Affine Hardware Requirements"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"100 MB storage growth per 1k documents with 1k words each \u2014 plan storage accordingly (leave ~10 GB for OS/docker)."}),"\n",(0,i.jsx)(n.li,{children:"4 CPU cores (usage varies, mostly when doing heavy tasks)."}),"\n",(0,i.jsx)(n.li,{children:"4 GB RAM for large docs (>10k words), 2 GB for normal use."}),"\n",(0,i.jsxs)(n.li,{children:["Reverse proxy setup, recommended Nginx Proxy Manager (video ",(0,i.jsx)(n.a,{href:"https://www.youtube.com/watch?v=DjKom4B4USo&ab_channel=LearnToHomeLab",children:"here"}),")."]}),"\n"]}),"\n",(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,i.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/oUwv6MjE6BU?si=N1G55AGJzfQjs1Gp",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"create-lxc-on-proxmox",children:"Create LXC on Proxmox"}),"\n",(0,i.jsx)(n.p,{children:"Create an LXC container in Proxmox with the specs above."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"install-docker-and-docker-compose",children:"Install Docker and Docker Compose"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Add Docker's official GPG key and repository:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'# Add Docker\'s official GPG key:\r\nsudo apt-get update\r\nsudo apt-get install ca-certificates curl\r\nsudo install -m 0755 -d /etc/apt/keyrings\r\nsudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc\r\nsudo chmod a+r /etc/apt/keyrings/docker.asc\r\n\r\n# Add the repository to Apt sources:\r\necho \\\r\n  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \\\r\n  $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \\\r\n  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\r\nsudo apt-get update\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Install Docker:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Verify installation:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"sudo docker run hello-world\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"Check Docker Compose version:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"docker compose version\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"installing-affine",children:"Installing Affine"}),"\n",(0,i.jsx)(n.p,{children:"Create a dedicated directory for Affine:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"mkdir affine\r\ncd affine\n"})}),"\n",(0,i.jsx)(n.p,{children:"Download latest docker-compose file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"wget -O docker-compose.yml https://github.com/toeverything/affine/releases/latest/download/docker-compose.yml\n"})}),"\n",(0,i.jsx)(n.p,{children:"Download the example .env configuration:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"wget -O .env https://github.com/toeverything/affine/releases/latest/download/default.env.example\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"editing-the-env-file",children:"Editing the .env file"}),"\n",(0,i.jsxs)(n.p,{children:["Open the ",(0,i.jsx)(n.code,{children:".env"})," file to configure:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"nano .env\n"})}),"\n",(0,i.jsx)(n.p,{children:"Default content includes:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# select a revision to deploy, available values: stable, beta, canary\r\nAFFINE_REVISION=stable\r\n\r\n# set the port for the server container it will expose the server on\r\nPORT=3010\r\n\r\n# set the host for the server for outgoing links\r\n# AFFINE_SERVER_HTTPS=true\r\n# AFFINE_SERVER_HOST=affine.yourdomain.com\r\n# or\r\n# AFFINE_SERVER_EXTERNAL_URL=https://affine.yourdomain.com\r\n\r\n# position of the database data to persist\r\nDB_DATA_LOCATION=~/.affine/self-host/postgres/pgdata\r\n# position of the upload data(images, files, etc.) to persist\r\nUPLOAD_LOCATION=~/.affine/self-host/storage\r\n# position of the configuration files to persist\r\nCONFIG_LOCATION=~/.affine/self-host/config\r\n\r\n# database credentials\r\nDB_USERNAME=affine\r\nDB_PASSWORD=\r\nDB_DATABASE=affine\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"start-affine",children:"Start Affine"}),"\n",(0,i.jsx)(n.p,{children:"Start or restart Affine with:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"docker compose down\r\ndocker compose up -d\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"adding-affine-to-nginx-proxy-manager",children:"Adding Affine to Nginx Proxy Manager"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Log in to Nginx Proxy Manager."}),"\n",(0,i.jsxs)(n.li,{children:["Go to ",(0,i.jsx)(n.strong,{children:"Hosts > Proxy Hosts"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Add Proxy Host"})," (top right)."]}),"\n",(0,i.jsxs)(n.li,{children:["Input domain from ",(0,i.jsx)(n.code,{children:".env"})," (",(0,i.jsx)(n.code,{children:"AFFINE_SERVER_HOST"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:["Enter server IP and port ",(0,i.jsx)(n.code,{children:"3010"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Keep HTTP option as is."}),"\n",(0,i.jsxs)(n.li,{children:["Enable ",(0,i.jsx)(n.strong,{children:"websockets support"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Add SSL certificate under SSL tab."}),"\n",(0,i.jsx)(n.li,{children:"Save."}),"\n",(0,i.jsx)(n.li,{children:"Click domain to access."}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"logging-in-to-affine",children:"Logging in to Affine"}),"\n",(0,i.jsx)(n.p,{children:"Access the admin panel at:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"http://<ip>:3010/admin\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Or access the normal page without ",(0,i.jsx)(n.code,{children:"/admin"}),"."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"about-accept-affine-cloud-message",children:'About "Accept Affine Cloud" Message'}),"\n",(0,i.jsx)(n.p,{children:"The self-hosted instance stores data locally in PostgreSQL despite the message suggesting cloud sync."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"upgrading-affine",children:"Upgrading Affine"}),"\n",(0,i.jsxs)(n.p,{children:["Follow official upgrade docs ",(0,i.jsx)(n.a,{href:"https://docs.affine.pro/self-host-affine/install/upgrade",children:"here"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Full docs at ",(0,i.jsx)(n.a,{href:"https://docs.affine.pro/index",children:"Affine Documentation"}),"."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"follow-us-on-social-media",children:"Follow Us on Social Media"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://www.youtube.com/@learntohomelab",children:"YouTube"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.a,{href:"https://discord.gg/6MsHSJWZpH",children:"Discord"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.a,{href:"https://www.patreon.com/c/learntohomelab",children:"Patreon"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.a,{href:"https://www.reddit.com/r/learntohomelab/",children:"Reddit"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.a,{href:"https://rumble.com/c/c-7585051",children:"Rumble"})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);