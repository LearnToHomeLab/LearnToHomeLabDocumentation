"use strict";(globalThis.webpackChunkLearn_To_Homelab=globalThis.webpackChunkLearn_To_Homelab||[]).push([[2083],{5157:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>g,frontMatter:()=>t,metadata:()=>s,toc:()=>x});const s=JSON.parse('{"id":"HomeLab-Series/EP26_nginxproxymanagerssl","title":"How to Setup The Nginx Proxy Manager and DuckDNS for Local SSL Certificates","description":"<div style={{","source":"@site/docs/HomeLab-Series/EP26_nginxproxymanagerssl.mdx","sourceDirName":"HomeLab-Series","slug":"/HomeLab-Series/EP26_nginxproxymanagerssl","permalink":"/docs/HomeLab-Series/EP26_nginxproxymanagerssl","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":29,"frontMatter":{"sidebar_position":29},"sidebar":"tutorialSidebar","previous":{"title":"How to Install The Pterodactyl Game Panel in One Click!","permalink":"/docs/HomeLab-Series/EP25_Pterodactylinstall"},"next":{"title":"How to Install Docmost on Proxmox with SSL","permalink":"/docs/HomeLab-Series/EP27_docmost"}}');var i=r(4848),o=r(8453),a=r(3573),l=(r(6519),r(7286));const t={sidebar_position:29},d="How to Setup The Nginx Proxy Manager and DuckDNS for Local SSL Certificates",c={},x=[{value:"Create a Virtual Machine or Container",id:"create-a-virtual-machine-or-container",level:2},{value:"Installing Docker",id:"installing-docker",level:2},{value:"Creating the Nginx Docker Compose File",id:"creating-the-nginx-docker-compose-file",level:2},{value:"Login to Nginx Proxy Manager",id:"login-to-nginx-proxy-manager",level:2},{value:"Creating your DuckDNS SSL Certificate",id:"creating-your-duckdns-ssl-certificate",level:2},{value:"Create OPNSense Local DNS Wildcard Entry",id:"create-opnsense-local-dns-wildcard-entry",level:2},{value:"Assign More Domains to Other Services",id:"assign-more-domains-to-other-services",level:2},{value:"Follow Us on Social Media",id:"follow-us-on-social-media",level:2}];function p(e){const n={a:"a",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"how-to-setup-the-nginx-proxy-manager-and-duckdns-for-local-ssl-certificates",children:"How to Setup The Nginx Proxy Manager and DuckDNS for Local SSL Certificates"})}),"\n",(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,i.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/DjKom4B4USo?si=2mTOOYuxy4Zwk7-l",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),"\n",(0,i.jsx)(n.h2,{id:"create-a-virtual-machine-or-container",children:"Create a Virtual Machine or Container"}),"\n",(0,i.jsx)(n.p,{children:"Set up a VM or CT on your preferred platform, here we create a CT on Proxmox."}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"ct overview.png",alt:"Proxmox container overview"}),"\n",(0,i.jsx)(n.h2,{id:"installing-docker",children:"Installing Docker"}),"\n",(0,i.jsxs)(n.p,{children:["Follow Docker\u2019s official documentation ",(0,i.jsx)(n.a,{href:"https://docs.docker.com/engine/install/ubuntu/",children:"here"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"First, update your system:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"sudo apt update && sudo apt upgrade -y\n"})}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"Still 2025-03-14 124231_1.15.1.png",alt:"System update"}),"\n",(0,i.jsx)(n.p,{children:"Set up Docker's apt repository:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'# Add Docker\'s official GPG key:\r\nsudo apt-get update\r\nsudo apt-get install ca-certificates curl\r\nsudo install -m 0755 -d /etc/apt/keyrings\r\nsudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc\r\nsudo chmod a+r /etc/apt/keyrings/docker.asc\r\n\r\n# Add the repository to Apt sources:\r\necho \\\r\n  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \\\r\n  $(. /etc/os-release && echo "${UBUNTU_CODENAME:-$VERSION_CODENAME}") stable" | \\\r\n  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\r\nsudo apt-get update\n'})}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"Still 2025-03-14 124231_1.16.1.png",alt:"Docker repo setup"}),"\n",(0,i.jsx)(n.p,{children:"Install Docker packages:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n"})}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"Still 2025-03-14 124231_1.16.2.png",alt:"Docker install"}),"\n",(0,i.jsx)(n.p,{children:"Verify installation:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"sudo docker run hello-world\n"})}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"Still 2025-03-14 124231_1.18.1.png",alt:"Docker test success"}),"\n",(0,i.jsx)(n.h2,{id:"creating-the-nginx-docker-compose-file",children:"Creating the Nginx Docker Compose File"}),"\n",(0,i.jsx)(n.p,{children:"Create docker-compose.yml:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"nano docker-compose.yml\n"})}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"Still 2025-03-14 124914_1.18.2.png",alt:"Nano editor"}),"\n",(0,i.jsx)(n.p,{children:"Paste this minimum required content:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"services:\r\n  app:\r\n    image: 'jc21/nginx-proxy-manager:latest'\r\n    restart: unless-stopped\r\n    ports:\r\n      - '80:80'\r\n      - '81:81'\r\n      - '443:443'\r\n    volumes:\r\n      - ./data:/data\r\n      - ./letsencrypt:/etc/letsencrypt\n"})}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"Still 2025-03-14 124914_1.19.1.png",alt:"Docker compose content"}),"\n",(0,i.jsx)(n.p,{children:"Bring up your stack:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"docker-compose up -d\r\n\r\n# If using docker-compose-plugin\r\ndocker compose up -d\n"})}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"Still 2025-03-14 124914_1.21.1.png",alt:"Docker compose up"}),"\n",(0,i.jsx)(n.h2,{id:"login-to-nginx-proxy-manager",children:"Login to Nginx Proxy Manager"}),"\n",(0,i.jsx)(n.p,{children:"When running, connect to your VM/CT IP on port 81 to access the admin interface. It may take a moment to generate keys."}),"\n",(0,i.jsx)(n.p,{children:"To find your IP:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"ip a\n"})}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"Still 2025-03-14 125654_1.23.1.png",alt:"Find IP command"}),"\n",(0,i.jsx)(n.p,{children:"Then in your browser:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"http://<your VM/Container IP>:81\n"})}),"\n",(0,i.jsx)(n.p,{children:"Default admin credentials:"}),"\n",(0,i.jsx)(n.p,{children:"Email:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"admin@example.com\n"})}),"\n",(0,i.jsx)(n.p,{children:"Password:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"changeme\n"})}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"Still 2025-03-14 125654_1.25.1.png",alt:"Nginx Proxy Manager login"}),"\n",(0,i.jsx)(n.h2,{id:"creating-your-duckdns-ssl-certificate",children:"Creating your DuckDNS SSL Certificate"}),"\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.a,{href:"https://www.duckdns.org/",children:"DuckDNS"})," and login with your Google or other account."]}),"\n",(0,i.jsx)(n.p,{children:"Create a subdomain and assign your Nginx Proxy Manager IP."}),"\n",(0,i.jsx)(n.p,{children:"This is also where you get your token ID."}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"Still 2025-03-14 130708_1.37.1.png",alt:"DuckDNS subdomain setup"}),"\n",(0,i.jsxs)(n.p,{children:["On Nginx Proxy Manager, go to ",(0,i.jsx)(n.em,{children:"SSL Certificates"})," \u2192 ",(0,i.jsx)(n.em,{children:"Add SSL Certificate"}),"."]}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"Still 2025-03-14 130624_1.39.1.png",alt:"Add SSL certificate"}),"\n",(0,i.jsx)(n.p,{children:"Enter:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Your ",(0,i.jsx)(n.code,{children:"<subdomain>.duckdns.org"})]}),"\n",(0,i.jsxs)(n.li,{children:["And the wildcard ",(0,i.jsx)(n.code,{children:"*.<subdomain>.duckdns.org"})," (important for sub-subdomains)"]}),"\n"]}),"\n",(0,i.jsx)(a.A,{emoji:"\u26a0\ufe0f",title:"Note",children:(0,i.jsx)(n.p,{children:"You may get a failure error after clicking SAVE due to DNS propagation delays. Wait a few minutes then try saving again."})}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"Still 2025-03-14 130624_1.43.1.png",alt:"Wildcard SSL certificate"}),"\n",(0,i.jsx)(n.p,{children:"After about 5 minutes, you should see a successful SSL certificate."}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"Still 2025-03-14 131610_1.45.1.png",alt:"SSL certificate successful"}),"\n",(0,i.jsxs)(n.p,{children:["On Proxy Dashboard, click ",(0,i.jsx)(n.em,{children:"Hosts"})," \u2192 ",(0,i.jsx)(n.em,{children:"Proxy Hosts"})," \u2192 ",(0,i.jsx)(n.em,{children:"Add Proxy Host"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["For example, add ",(0,i.jsx)(n.code,{children:"<pve>.lthlearn.duckdns.org"})," using the wildcard ",(0,i.jsx)(n.code,{children:"*"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Remember Proxmox uses HTTPS by default; select HTTP for most services in the ",(0,i.jsx)(n.em,{children:"scheme"})," box."]}),"\n",(0,i.jsx)(a.A,{emoji:"\u26a0\ufe0f",title:"Note",children:(0,i.jsxs)(n.p,{children:["Enable ",(0,i.jsx)(n.code,{children:"websockets support"})," if your service requires it, e.g., for code boxes that auto-copy commands."]})}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"Still 2025-03-14 131610_1.48.1.png",alt:"Add proxy host"}),"\n",(0,i.jsx)(n.p,{children:"After saving, try clicking your domain. It may work unless blocked by firewall like OPNsense\u2014next step needed."}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"Still 2025-03-14 131610_1.49.1.png",alt:"Access blocked by firewall"}),"\n",(0,i.jsx)(n.h2,{id:"create-opnsense-local-dns-wildcard-entry",children:"Create OPNSense Local DNS Wildcard Entry"}),"\n",(0,i.jsx)(n.p,{children:"Enable Unbound DNS via Services \u2192 Unbound DNS \u2192 General Settings."}),"\n",(0,i.jsx)(n.p,{children:"Make sure Unbound DNS is enabled."}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"part 1 _ OPNsense.localdomain.png",alt:"Enable Unbound DNS"}),"\n",(0,i.jsx)(n.p,{children:"Add a Wildcard DNS Override under Services \u2192 Unbound DNS \u2192 Overrides."}),"\n",(0,i.jsx)(n.p,{children:"Click + Add under Host Overrides."}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"part 2 _ OPNsense.localdomain.png",alt:"Add DNS override"}),"\n",(0,i.jsx)(n.p,{children:"Set:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Host: * (wildcard for all subdomains)"}),"\n",(0,i.jsx)(n.li,{children:"Domain: duckdns.org"}),"\n",(0,i.jsx)(n.li,{children:"Type: A (IPv4)"}),"\n",(0,i.jsx)(n.li,{children:"IP Address: internal IP of Nginx Proxy Manager server (e.g., 192.168.50.234)"}),"\n",(0,i.jsx)(n.li,{children:"Description (optional): Wildcard for DuckDNS domains"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Save and apply."}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"part 3_ OPNsense.localdomain.png",alt:"DNS override details"}),"\n",(0,i.jsx)(n.p,{children:"Flush DNS Cache on your local machine (Windows cmd):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"ipconfig /flushdns\n"})}),"\n",(0,i.jsx)(n.h2,{id:"assign-more-domains-to-other-services",children:"Assign More Domains to Other Services"}),"\n",(0,i.jsx)(n.p,{children:"Return to Nginx Proxy Manager, click your domain, it should now work."}),"\n",(0,i.jsx)(n.p,{children:"Repeat adding proxy hosts for all services to secure SSL and eliminate unsecure warnings."}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"2025-03-14 13_33_30-Nginx Proxy Manager.png",alt:"Nginx Proxy Manager dashboard"}),"\n",(0,i.jsx)(n.p,{children:"Secured websites are now working."}),"\n",(0,i.jsx)(l.A,{folder:"images/EP26_nginxproxymanagerssl",name:"2025-03-14 13_35_11-Nginx Proxy Manager.png",alt:"Secure site example"}),"\n",(0,i.jsx)(n.h2,{id:"follow-us-on-social-media",children:"Follow Us on Social Media"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://www.youtube.com/@learntohomelab",children:"YouTube"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.a,{href:"https://discord.gg/6MsHSJWZpH",children:"Discord"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.a,{href:"https://www.patreon.com/c/learntohomelab",children:"Patreon"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.a,{href:"https://www.reddit.com/r/learntohomelab/",children:"Reddit"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.a,{href:"https://rumble.com/c/c-7585051",children:"Rumble"})]})]})}function g(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}}}]);